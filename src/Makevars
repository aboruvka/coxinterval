SOURCES = coxaalenic.c rcplex.c coxic.c
OBJECTS = coxaalenic.o rcplex.o coxic.o

ifeq "$(CPLEXLNVARS)$(CPLEXINVARS)$(NOCPLEX)" ""
ifeq "$(wildcard $(CPLEXDIR)/cplex)" ""
CPLEXDIR = 
endif
ifeq "$(wildcard $(CPLEXINCDIR)/ilcplex/cplex.h)" ""
CPLEXINCDIR = 
endif
ifeq "$(wildcard $(CPLEXLIBDIR)/cplex*.lib)" ""
CPLEXLIBDIR = 
endif
ifeq "$(CPLEXDIR)" ""
CPLEXDIR = $(wildcard /Users/*/Applications/IBM/ILOG/CPLEX*)
ifeq "$(CPLEXDIR)" ""
CPLEXDIR = $(wildcard /opt/*/ILOG/CPLEX*)
endif
endif
ifneq "$(CPLEXDIR)" ""
ifeq "$(CPLEXLIBDIR)" ""
CPLEXLIBDIR = $(firstword $(wildcard $(CPLEXDIR)/cplex/lib/*/*))
endif
ifeq "$(CPLEXINCDIR)" ""
CPLEXINCDIR = $(firstword $(wildcard $(CPLEXDIR)/cplex/include))
endif
endif
ifneq "$(CPLEXLIBDIR)" ""
CPLEXLNVARS = -L$(CPLEXLIBDIR) -lcplex -lm
endif
CPLEXINC = $(wildcard $(CPLEXINCDIR)/ilcplex/cplex.h)
ifneq "$(CPLEXINC)" ""
CPLEXINVARS = -I$(CPLEXINCDIR)
endif
endif

ifndef CPLEXLNVARS
CPLEXINVARS =
endif

ifneq "$(NOCPLEX)" ""
CPLEXINVARS =
endif

ifndef CPLEXINVARS
SOURCES = coxic.c
OBJECTS = coxic.o
CPLEXLNVARS =
endif

PKG_CPPFLAGS = $(SHLIB_PTHREAD_FLAGS) $(CPLEXINVARS)
PKG_LIBS = $(LAPACK_LIBS) $(BLAS_LIBS) $(FLIBS) $(SHLIB_PTHREAD_FLAGS) \
	$(CPLEXLNVARS)
